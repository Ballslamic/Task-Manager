<% include layout %>

<div class="task-list">
    <h2>Your Tasks</h2>
    <ul>
        <% tasks.forEach(task => { %>
            <li style="background-color: <%= task.category && task.category.colorCode ? task.category.colorCode : '#cccccc' %>;">
                <strong><%= task.name %></strong> - Due: <%= task.dueDate.toDateString() %> 
                (Estimated time: <%= task.estimatedTime %> hours)
                <form action="/delete/<%= task._id %>" method="POST" style="display:inline;">
                    <button type="submit">Delete</button>
                </form>
            </li>
            
        <% }); %>
    </ul>
</div>

<div class="add-task">
    <h2>Add New Task</h2>
    <form action="/add" method="POST">
        <input type="text" name="taskName" placeholder="Task name" required>
        
        <label for="dueDate">Due Date:</label>
        <input type="date" name="dueDate" required>

        <label for="estimatedTime">Estimated Time (hours):</label>
        <input type="number" name="estimatedTime" step="0.1" required>

        <label for="category">Category:</label>
        <select name="category">
            <option value="">None (Default Color)</option>
            <% categories.forEach(category => { %>
                <option value="<%= category._id %>"><%= category.name %></option>
            <% }); %>
        </select>

        <button type="submit">Add Task</button>
    </form>
</div>
